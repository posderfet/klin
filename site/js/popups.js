var extend=function(t,o){function p(){this.constructor=t}for(var r in o)hasProp.call(o,r)&&(t[r]=o[r]);return p.prototype=o.prototype,t.prototype=new p,t.__super__=o.prototype,t},hasProp={}.hasOwnProperty;jQuery(function(){var PopupBackground,PopupController,popup;return PopupBackground=function(){function t(){this.calc_sbw()}return t.prototype.background=function(){return $(".popup-background")},t.prototype.body=function(){return $("body")},t.prototype.scrollbarWidth=void 0,t.prototype.wrapper=function(){return $(".popup-wrapper")},t.prototype.bg_on=function(){var t;return this.background().css("opacity",0).show().fadeTo("normal",.5),t=0,this.body().height()>$(window).height()&&(t=this.scrollbarWidth),this.body().css("padding-right",t).css("overflow","hidden"),this.wrapper().show()},t.prototype.bg_off=function(){return this.background().css("opacity",0).hide(),this.body().css("padding-right",0).css("overflow","auto"),this.wrapper().hide()},t.prototype.is_bg_on=function(){return this.background().is(":visible")},t.prototype.calc_sbw=function(){var t;return t=document.createElement("div"),t.style.overflow="scroll",t.style.visibility="hidden",t.style.position="absolute",t.style.width="100px",t.style.height="100px",document.body.appendChild(t),this.scrollbarWidth=t.offsetWidth-t.clientWidth,document.body.removeChild(t)},t}(),PopupController=function(superClass){function PopupController(){PopupController.__super__.constructor.apply(this,arguments),this.layer().css("top","12%")}return extend(PopupController,superClass),PopupController.prototype.layer=function(){return $(".popup-layer")},PopupController.prototype.stack=function(){return $(".popup-stack")},PopupController.prototype.stack_push=function(){var t,o,p,r,e;for(o=this.layer().children(),e=[],p=0,r=o.length;p<r;p++)t=o[p],e.push($(t).detach().appendTo(this.stack()));return e},PopupController.prototype.stack_pop=function(){var t,o,p,r;for(o=this.stack().children(),r=[],p=o.length-1;p>=0;p+=-1){t=o[p],this.layer().width($(t).innerWidth()),$(t).detach().appendTo(this.layer()),this.bg_on();break}return r},PopupController.prototype.pushPop=function(t){return this.stack_push(),this.layer().append(t),this.layer().width(t.innerWidth())},PopupController.prototype.hidePop=function(box){var onclose,replace;return replace=$(box).attr("data-replace"),onclose=$(box).attr("data-onclose"),onclose&&eval(onclose),replace?$(replace,".static_popups").replaceWith(box):$(box).remove(),this.bg_off(),this.stack_pop()},PopupController.prototype.showPop=function(t){return this.bg_on()},PopupController.prototype.escPop=function(){return this.layer().children().hidePop()},PopupController}(PopupBackground),popup=new PopupController,$.fn.pushPop=function(){return popup.pushPop($(this)),popup.showPop()},$.fn.showPop=function(){var t;return $(this).parents(".static_popups").length>0?(t=$(this).clone(),popup.pushPop(t),popup.showPop()):popup.showPop($(this))},$.fn.hidePop=function(){return popup.hidePop($(this))},$.fn.escPop=function(){if(!($(".popup-layer").find(".noclose").length>0))return popup.escPop()},$.fn.hasScrollBar=function(){return this.get(0).scrollHeight>this.height()},$("html").on("submit",".popup_form",function(){var t,o,p,r;return r=$(this).attr("action"),p=$(this).attr("method"),t=$(this).serialize(),o=function(t){var o;return o=$(t),popup.pushPop(o),o.showPop()},$.ajax({type:p,data:t,url:r,success:o}),!1}),$("html").on("click",".popup_link",function(){var t;return t=$(this).attr("data-url"),$.get(t,null,function(t){var o;return o=$(t),popup.pushPop(o),o.showPop()})}),$("html").on("click",".popup-wrapper .close-this",function(){return $(this).parents(".popup-window").hidePop(),$(this).parents(".popup-window").addClass("qwerty"),!1}),$("html").on("click",".popup-wrapper",function(t){var o;if("popup-wrapper"===t.target.className){if($(".popup-layer").find(".noclose").length>0)return;return o=$(".popup-layer").children().hidePop()}}),$(window).off("keydown",null),$(window).on("keydown",null,function(t){if(27===t.which)return $(window).escPop()}),$("html").on("click",".house-section.selected .house-floor",function(){var t,o,p,r;return o=$(this).data("building-floor"),r=$(this).closest(".house-section").data("building-section"),t=$(this).closest(".building-wrapper").data("building"),p="gp"+t+"_s"+r,console.log(p),$('[data-popup-token="'+p+'"]').showPop()}),$("html").on("click",".map-floor__apartment",function(){var t;return t=$(this).data("apartment-token"),$(".img-apartment-map").attr("src","images/"+t+".png"),$(".popup-apartment").showPop()}),$("html").on("mouseenter",".floor-map__legend-item",function(){if("1p"===$(this).attr("data-legend-apartment")&&$(".map-floor__apartment-1p").addClass("map-show-apartment"),"1s"===$(this).attr("data-legend-apartment")&&$(".map-floor__apartment-1s").addClass("map-show-apartment"),"2"===$(this).attr("data-legend-apartment")&&$(".map-floor__apartment-2").addClass("map-show-apartment"),"2p"===$(this).attr("data-legend-apartment")&&$(".map-floor__apartment-2p").addClass("map-show-apartment"),"3"===$(this).attr("data-legend-apartment")&&$(".map-floor__apartment-3").addClass("map-show-apartment"),"3p"===$(this).attr("data-legend-apartment"))return $(".map-floor__apartment-3p").addClass("map-show-apartment")}),$("html").on("mouseleave",".floor-map__legend-item",function(){if("1p"===$(this).attr("data-legend-apartment")&&$(".map-floor__apartment-1p").removeClass("map-show-apartment"),"1s"===$(this).attr("data-legend-apartment")&&$(".map-floor__apartment-1s").removeClass("map-show-apartment"),"2"===$(this).attr("data-legend-apartment")&&$(".map-floor__apartment-2").removeClass("map-show-apartment"),"2p"===$(this).attr("data-legend-apartment")&&$(".map-floor__apartment-2p").removeClass("map-show-apartment"),"3"===$(this).attr("data-legend-apartment")&&$(".map-floor__apartment-3").removeClass("map-show-apartment"),"3p"===$(this).attr("data-legend-apartment"))return $(".map-floor__apartment-3p").removeClass("map-show-apartment")})});