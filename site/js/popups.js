var extend=function(o,t){function r(){this.constructor=o}for(var p in t)hasProp.call(t,p)&&(o[p]=t[p]);return r.prototype=t.prototype,o.prototype=new r,o.__super__=t.prototype,o},hasProp={}.hasOwnProperty;jQuery(function(){var PopupBackground,PopupController,popup;return PopupBackground=function(){function o(){this.calc_sbw()}return o.prototype.background=function(){return $(".popup-background")},o.prototype.body=function(){return $("body")},o.prototype.scrollbarWidth=void 0,o.prototype.wrapper=function(){return $(".popup-wrapper")},o.prototype.bg_on=function(){var o;return this.background().css("opacity",0).show().fadeTo("normal",.5),o=0,this.body().height()>$(window).height()&&(o=this.scrollbarWidth),this.body().css("padding-right",o).css("overflow","hidden"),this.wrapper().show()},o.prototype.bg_off=function(){return this.background().css("opacity",0).hide(),this.body().css("padding-right",0).css("overflow","auto"),this.wrapper().hide()},o.prototype.is_bg_on=function(){return this.background().is(":visible")},o.prototype.calc_sbw=function(){var o;return o=document.createElement("div"),o.style.overflow="scroll",o.style.visibility="hidden",o.style.position="absolute",o.style.width="100px",o.style.height="100px",document.body.appendChild(o),this.scrollbarWidth=o.offsetWidth-o.clientWidth,document.body.removeChild(o)},o}(),PopupController=function(superClass){function PopupController(){PopupController.__super__.constructor.apply(this,arguments),this.layer().css("top","12%")}return extend(PopupController,superClass),PopupController.prototype.layer=function(){return $(".popup-layer")},PopupController.prototype.stack=function(){return $(".popup-stack")},PopupController.prototype.stack_push=function(){var o,t,r,p,e;for(t=this.layer().children(),e=[],r=0,p=t.length;r<p;r++)o=t[r],e.push($(o).detach().appendTo(this.stack()));return e},PopupController.prototype.stack_pop=function(){var o,t,r,p;for(t=this.stack().children(),p=[],r=t.length-1;r>=0;r+=-1){o=t[r],this.layer().width($(o).innerWidth()),$(o).detach().appendTo(this.layer()),this.bg_on();break}return p},PopupController.prototype.pushPop=function(o){return this.stack_push(),this.layer().append(o),this.layer().width(o.innerWidth())},PopupController.prototype.hidePop=function(box){var onclose,replace;return replace=$(box).attr("data-replace"),onclose=$(box).attr("data-onclose"),onclose&&eval(onclose),replace?$(replace,".static_popups").replaceWith(box):$(box).remove(),this.bg_off(),this.stack_pop()},PopupController.prototype.showPop=function(o){return this.bg_on()},PopupController.prototype.escPop=function(){return this.layer().children().hidePop()},PopupController}(PopupBackground),popup=new PopupController,$.fn.pushPop=function(){return popup.pushPop($(this)),popup.showPop()},$.fn.showPop=function(){var o;return $(this).parents(".static_popups").length>0?(o=$(this).clone(),popup.pushPop(o),popup.showPop()):popup.showPop($(this))},$.fn.hidePop=function(){return popup.hidePop($(this))},$.fn.escPop=function(){if(!($(".popup-layer").find(".noclose").length>0))return popup.escPop()},$.fn.hasScrollBar=function(){return this.get(0).scrollHeight>this.height()},$("html").on("submit",".popup_form",function(){var o,t,r,p;return p=$(this).attr("action"),r=$(this).attr("method"),o=$(this).serialize(),t=function(o){var t;return t=$(o),popup.pushPop(t),t.showPop()},$.ajax({type:r,data:o,url:p,success:t}),!1}),$("html").on("click",".popup_link",function(){var o;return o=$(this).attr("data-url"),$.get(o,null,function(o){var t;return t=$(o),popup.pushPop(t),t.showPop()})}),$("html").on("click",".popup-wrapper .close-this",function(){return $(this).parents(".popup-window").hidePop(),$(this).parents(".popup-window").addClass("qwerty"),!1}),$("html").on("click",".popup-wrapper",function(o){var t;if("popup-wrapper"===o.target.className){if($(".popup-layer").find(".noclose").length>0)return;return t=$(".popup-layer").children().hidePop()}}),$(window).off("keydown",null),$(window).on("keydown",null,function(o){if(27===o.which)return $(window).escPop()}),$("html").on("click",".house-section.selected .house-floor",function(){var o,t,r,p;return t=$(this).data("building-floor"),p=$(this).closest(".house-section").data("building-section"),o=$(this).closest(".building-wrapper").data("building"),r="gp"+o+"_s"+p,console.log(r),$('[data-popup-token="'+r+'"]').showPop()}),$("html").on("click",".map-floor__room",function(){var o;return o=$(this).data("apartment-token"),$(".img-apartment-map").attr("src","images/"+o+".png"),$(".popup-apartment").showPop()}),$("html").on("mouseenter",".floor-map__legend-item",function(){if("1p"===$(this).attr("data-legend-room")&&$(".map-floor__room-1p").addClass("map-show-room"),"1s"===$(this).attr("data-legend-room")&&$(".map-floor__room-1s").addClass("map-show-room"),"2"===$(this).attr("data-legend-room")&&$(".map-floor__room-2").addClass("map-show-room"),"3"===$(this).attr("data-legend-room")&&$(".map-floor__room-3").addClass("map-show-room"),"3p"===$(this).attr("data-legend-room"))return $(".map-floor__room-3p").addClass("map-show-room")}),$("html").on("mouseleave",".floor-map__legend-item",function(){if("1p"===$(this).attr("data-legend-room")&&$(".map-floor__room-1p").removeClass("map-show-room"),"1s"===$(this).attr("data-legend-room")&&$(".map-floor__room-1s").removeClass("map-show-room"),"2"===$(this).attr("data-legend-room")&&$(".map-floor__room-2").removeClass("map-show-room"),"3"===$(this).attr("data-legend-room")&&$(".map-floor__room-3").removeClass("map-show-room"),"3p"===$(this).attr("data-legend-room"))return $(".map-floor__room-3p").removeClass("map-show-room")})});